---
import Main from '../../layouts/main.astro';
import {getCollection} from "astro:content";
const posts = await getCollection('posts', ({data})=>{
  return !data.draft;
});
console.log(posts[0]);
import tools from '../../tools';
---

<Main title="Anas Ouardini's Blog Posts" type="WebSite" date="2023-06-04" seo_date="2023-06-04">
  <main class="w-[90%] mx-auto max-w-[1000px] my-10">
    <h1 class="mb-10 text-2xl">Blog Posts</h1>
    {
      posts
        .filter((post) => !post.data.draft)
        .map((post) => (
          <a href={`/posts/${post.slug}`} class="block max-w-[35rem] mb-5 bg-dark-2 rounded-[3%]">
            <div
              aria-label="blog post card"
              class="p-4 text-gray-200"
            >
              <figure class="pb-[1.2rem]"><img src={post.data.image?.url}/></figure>
              <h2 class="text-blue-400 text-xl mb-2 capitalize">{post.data.title}</h2>
              <p class="text-md">
               <span class="text-gray-500">Published on</span> {post.data.date.split(' ').slice(0, 4).join(' ')}
                <span class="text-gray-500">by</span> {post.data.author}
              </p>
            </div>
          </a>
        ))
    }
  </main>
</Main>
